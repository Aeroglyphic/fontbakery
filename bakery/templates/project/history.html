{% extends "project/base.html" %}
{% set page_title = _("Build history") %}

{% block pnav %}
{% from 'project/macros.html' import nav with context%}
{{ nav('build') }}
{% endblock %}

{% block pbody %}

<p>
  <a href="{{ url_for('project.bump', project_id = project.id)}}" class="btn btn-primary">{{ _("Build 'HEAD'") }}</a>
</p>

<table class="table table-bordered table-condensed">
  <thead>
    <tr>
      <th style="text-align: center"><i class="icon-circle muted"></i></th>
      <th>{{ _("Hashtag") }}:{{ _("Build id") }}</th>
      <th>{{ _("Date") }}</th>
      <th>{{ _("Results") }}</th>
    </tr>
  </thead>
  <tbody>
    {% for b in builds -%}
    <tr>
      <td style="text-align: center">
        {% if not b.is_done %}<i class="icon-spinner icon-spin text-success" data-toggle="tooltip" rel="tooltip" data-original-title="{{ _('This build is not ready yet') }}"></i>
        {% elif b.modified %}<i class="icon-circle text-success" data-toggle="tooltip" rel="tooltip" data-original-title="{{ _('This build was manually modified') }}"></i>
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('project.log', project_id=b.project.id, build_id=b.id)}}">{{b.revision}}:{{b.id}}</a>
      </td>
      <td>
        {{b.updated}} {% if b.is_done %} <i class="icon-check"></i>{% endif %}
      </td>
      <td>
        In 10/0/20, Out 1/0/50
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="3">
        <div class="well">
        <p>{{ _("No recent builds found, select hash from <a href='%(url)s'>git log page</a> or build latest head build.", url=url_for('project.git', project_id=project.id)) }}</p>
        <p class="text-center"><a href="{{ url_for('project.bump', project_id = project.id)}}" class="btn btn-primary">{{ _("Build 'HEAD'") }}</a></p>

        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>


{% endblock %}

